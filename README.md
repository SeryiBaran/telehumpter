# telehumpter

Недо-пародия на твиттер на Supabase+Vue.

## Технологии

- [Vue.js](https://vuejs.org/)
- [Vee-validate](https://vee-validate.logaretm.com/v4/)
- [Vue3-toastify](https://vue3-toastify.js-bridge.com/)
- [Supabase](https://supabase.com/)
- [DaisyUI](https://daisyui.com/)
- [Tailwind](https://tailwindcss.com/)
- [Vue Router](https://router.vuejs.org/)
- [Typescript](https://www.typescriptlang.org/)

## Схема Supabase

### Схема `posts`

```sql
create table
  public.posts (
    id bigint generated by default as identity not null,
    created_at timestamp with time zone null default now(),
    content text not null default ''::text,
    authorId uuid not null,
    constraint posts_pkey primary key (id),
    constraint posts_authorId_fkey foreign key ("authorId") references profiles (id) on delete cascade
  ) tablespace pg_default;
```

### Схема `profiles`

```sql
create table
  public.profiles (
    id uuid not null,
    username text not null,
    constraint profiles_pkey primary key (id),
    constraint profiles_username_key unique (username),
    constraint profiles_id_fkey foreign key (id) references auth.users (id) on delete cascade
  ) tablespace pg_default;
```

### Права

#### Права `posts`

| Операция | Права                                   |
| -------- | --------------------------------------- |
| `INSERT` | All users can create posts.             |
| `SELECT` | All users can view posts.               |
| `INSERT` | Individuals can create posts.           |
| `DELETE` | Individuals can delete their own posts. |
| `UPDATE` | Individuals can update their own posts. |

#### Права `profiles`

| Операция | Права                                      |
| -------- | ------------------------------------------ |
| `INSERT` | All users can create profiles.             |
| `SELECT` | All users can view profiles.               |
| `UPDATE` | Individuals can update their own profiles. |

## Генерация типов из БД

Авторизуйтесь:

```bash
npx supabase login
```

Сгенерируйте типы:

```bash
npx supabase gen types typescript --project-id АЙДИ_ПРОЕКТА --schema public > src/types/supabase.ts
```

## Backup restore (Я НЕ ЗНАЮ КАК ПЕРЕНАСТРОИТЬ ВСЕ В SUPABASE С НУЛЯ Я ЗАБЫЛ ЗАПИСАТЬ КАК ЭТО ДЕЛАТЬ Я ТУПОРЫЛЫЙ `*******`)

```bash
.\postgresql-17.4-1-windows-x64-binaries\pgsql\bin\psql.exe -d "postgresql://postgres.PROJIDDDDDDDDDDD:DBPASSSSSSSSSSS@aws-0-us-east-2.pooler.supabase.com:5432/postgres" -f ".\db_cluster-18-12-2023@00-21-38.backup"
```
